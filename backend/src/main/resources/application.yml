spring:
  application:
    name: dappstore-backend
  profiles:
    active: dev

  # Jackson 配置
  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false

  # Elasticsearch 配置 (开发环境默认禁用)
  elasticsearch:
    uris: ${ELASTICSEARCH_URIS:http://localhost:9200}

# 服务器配置
server:
  port: 8080

# Actuator 配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized

# OpenAPI 配置
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true

# 应用配置
app:
  jwt:
    # WARNING: 生产环境必须设置 JWT_SECRET 环境变量!
    secret: ${JWT_SECRET:dev-only-secret-do-not-use-in-production-32chars}
    expiration: ${JWT_EXPIRATION:86400000}  # 24 hours in milliseconds

  # Google OAuth 配置
  google:
    # WARNING: 生产环境必须设置 GOOGLE_CLIENT_ID 环境变量!
    client-id: ${GOOGLE_CLIENT_ID:your-google-client-id.apps.googleusercontent.com}

  storage:
    type: minio
    bucket:
      apk: dappstore-apks
      icon: dappstore-icons
      screenshot: dappstore-screenshots

  elasticsearch:
    enabled: ${ELASTICSEARCH_ENABLED:false}  # 开发环境默认禁用
    sync-on-startup: ${ELASTICSEARCH_SYNC_ON_STARTUP:false}

# 日志配置
logging:
  level:
    com.di.dappstore: DEBUG
    org.springframework.r2dbc: DEBUG
